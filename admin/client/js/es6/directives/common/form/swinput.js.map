{"version":3,"sources":["directives/common/form/swinput.ts"],"names":[],"mappings":"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","file":"directives/common/form/swinput.js","sourcesContent":["/**\n * This validate directive will look at the current element, figure out the context (save, edit, delete) and \n * validate based on that context as defined in the validation properties object.\n */\n'use strict';\nangular.module('slatwalladmin').directive('swInput',\n\n['$log',\n '$compile',\n 'utilityService',\n function(\n\t$log, \n\t$compile,\n\tutilityService\n) {\n\tvar getValidationDirectives = function(propertyDisplay){\n\t\tvar spaceDelimitedList = '';\n\t\tvar name = propertyDisplay.property;\n\t\tvar form = propertyDisplay.form.$$swFormInfo;\n\t\t$log.debug(\"Name is:\" + name + \" and form is: \" + form);\n\t\tvar validations = propertyDisplay.object.validations.properties[propertyDisplay.property];\n\t\t$log.debug(\"Validations: \");\n\t\tvar validationsForContext = [];\n\t\t\n\t\t//get the form context and the form name.\n\t\tvar formContext = propertyDisplay.form.$$swFormInfo.context;\n\t\tvar formName = propertyDisplay.form.$$swFormInfo.name;\n\t\t$log.debug(\"Form context is: \");\n\t\t$log.debug(formContext);\n\t\t$log.debug(\"Form Name: \");\n\t\t$log.debug(formName);\n\t\t//get the validations for the current element.\n\t\tvar propertyValidations = propertyDisplay.object.validations.properties[name];\n\t\t/*\n\t\t * Investigating why number inputs are not working.\n\t\t * */\n\t\t//check if the contexts match.\n\t\tif (angular.isObject(propertyValidations)){\n            //if this is a procesobject validation then the context is implied\n            if(angular.isUndefined(propertyValidations[0].contexts) && propertyDisplay.object.metaData.isProcessObject){\n                propertyValidations[0].contexts = propertyDisplay.object.metaData.className.split('_')[1];\n            }\n            \n\t\t\tif (propertyValidations[0].contexts === formContext){\n\t\t\t\t$log.debug(\"Matched\");\n\t\t\t\tfor (var prop in propertyValidations[0]){\n\t\t\t\t\t\tif (prop != \"contexts\" && prop !== \"conditions\"){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tspaceDelimitedList += (\" swvalidation\" + prop.toLowerCase() + \"='\" + propertyValidations[0][prop] + \"'\");\n\t\t\t\t\t\t\n\t\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t}\n\t\t$log.debug(spaceDelimitedList);\n\t\t}\n\t\t//loop over validations that are required and create the space delimited list\n\t\t$log.debug(validations);\n\t\t\n\t\t//get all validations related to the form context;\n\t\t$log.debug(form);\n\t\t$log.debug(propertyDisplay);\n\t\tangular.forEach(validations,function(validation,key){\n\t\t\tif(utilityService.listFind(validation.contexts.toLowerCase(),form.context.toLowerCase()) !== -1){\n\t\t\t\t$log.debug(\"Validations for context\");\n\t\t\t\t$log.debug(validation);\n\t\t\t\tvalidationsForContext.push(validation);\n\t\t\t}\n\t\t});\n\t\t\n\t\t//now that we have all related validations for the specific form context that we are working with collection the directives we need\n\t\t//getValidationDirectiveByType();\n\t\t\n\t\t\n\t\treturn spaceDelimitedList;\n\t};\n\t\n\tvar getTemplate = function(propertyDisplay){\n\t\tvar template = '';\n\t\tvar validations = '';\n\t\tif(!propertyDisplay.noValidate){\n\t\t\tvalidations = getValidationDirectives(propertyDisplay);\n\t\t}\n\t\tif(propertyDisplay.fieldType === 'text'){\n\t\t\ttemplate = '<input type=\"text\" class=\"form-control\" '+\n\t\t\t'ng-model=\"propertyDisplay.object.data[propertyDisplay.property]\" '+\n\t\t    'ng-disabled=\"!propertyDisplay.editable\" '+ \n\t\t    'ng-show=\"propertyDisplay.editing\" '+\n\t\t    'name=\"'+propertyDisplay.property+'\" ' +\n\t\t    validations+ \n\t\t    'id=\"swinput'+utilityService.createID(26)+'\"'+\n\t\t\t' />';\n\t\t}else if(propertyDisplay.fieldType === 'password'){\n            template = '<input type=\"password\" class=\"form-control\" '+\n            'ng-model=\"propertyDisplay.object.data[propertyDisplay.property]\" '+\n            'ng-disabled=\"!propertyDisplay.editable\" '+ \n            'ng-show=\"propertyDisplay.editing\" '+\n            'name=\"'+propertyDisplay.property+'\" ' +\n            validations+\n            'id=\"swinput'+utilityService.createID(26)+'\"'+\n            ' />';\n        }\n\t\t\n\t\t/*else if(propertyDisplay.fieldType === \"number\"){\n\t\t\tconsole.info(\"Found Number Input\");\n\t\t\ttemplate = '<input type=\"number\" class=\"form-control\" '+\n\t\t\t'ng-model=\"propertyDisplay.object.data[propertyDisplay.property]\" '+\n\t\t    'ng-disabled=\"!propertyDisplay.editable\" '+ \n\t\t    'ng-show=\"propertyDisplay.editing\" '+\n\t\t    'name=\"'+propertyDisplay.property+'\" ' +\n\t\t    validations+\n\t\t    'id=\"swinput'+utilityService.createID(26)+'\"'+\n\t\t\t' />';\n\t\t\t$log.debug(template);\n\t\t\t$log.debug(validations);\n\t\t}*/\n\t\treturn template; \n\t};\n\t\n\treturn {\n\t\trequire:'^form',\n\t\tscope:{\n\t\t\tpropertyDisplay:\"=\"\n\t\t},\n\t\trestrict : \"E\",\n\t\t//adding model and form controller\n\t\tlink : function(scope, element, attr, formController) {\n\t\t\t//renders the template and compiles it\n\t\t\telement.html(getTemplate(scope.propertyDisplay));\n\t        $compile(element.contents())(scope);\n\t\t}\n\t};\n} ]);"],"sourceRoot":"/source/"}