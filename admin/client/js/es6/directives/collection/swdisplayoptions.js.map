{"version":3,"sources":["directives/collection/swdisplayoptions.ts"],"names":[],"mappings":"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","file":"directives/collection/swdisplayoptions.js","sourcesContent":["angular.module('slatwalladmin')\n.directive('swDisplayOptions',[\n\t'$http',\n\t'$compile',\n\t'$templateCache',\n\t'$log',\n\t'$slatwall',\n\t'collectionService',\n\t'collectionPartialsPath',\n\tfunction(\n\t\t$http,\n\t\t$compile,\n\t\t$templateCache,\n\t\t$log,\n\t\t$slatwall,\n\t\tcollectionService,\n\t\tcollectionPartialsPath\n\t){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttransclude:true,\n\t\t\tscope:{\n\t\t\t\torderBy:\"=\",\n\t\t\t\tcolumns:'=',\n\t\t\t\tpropertiesList:\"=\",\n\t\t\t\tsaveCollection:\"&\",\n\t\t\t\tbaseEntityAlias:\"=\",\n\t\t\t\tbaseEntityName:\"=\"\n\t\t\t},\n\t\t\ttemplateUrl:collectionPartialsPath+\"displayoptions.html\",\n\t\t\tcontroller: ['$scope','$element','$attrs',function($scope,$element,$attrs){\n\t\t\t\t$log.debug('display options initialize');\n\t\t\t\t\n\t\t\t\tthis.removeColumn = function(columnIndex){\n\t\t\t\t\t$log.debug('parent remove column');\n\t\t\t\t\t$log.debug($scope.columns);\n\t\t\t\t\tif($scope.columns.length){\n\t\t\t\t\t\t$scope.columns.splice(columnIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.getPropertiesList = function(){\n\t\t\t\t\treturn $scope.propertiesList;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$scope.addDisplayDialog = {\n\t\t\t\t\tisOpen:false,\n\t\t\t\t\ttoggleDisplayDialog:function(){\n\t\t\t\t\t\t$scope.addDisplayDialog.isOpen = !$scope.addDisplayDialog.isOpen; \n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tvar getTitleFromPropertyIdentifier = function(propertyIdentifier){\n\t\t\t\t\tvar baseEntityCfcName = $scope.baseEntityName.replace('Slatwall','').charAt(0).toLowerCase()+$scope.baseEntityName.replace('Slatwall','').slice(1); \n\t\t\t\t\t\n\t\t\t\t\tvar title = '';\n\t\t\t\t\tvar propertyIdentifierArray = propertyIdentifier.split('.');\n\t\t\t\t\tvar currentEntity;\n\t\t\t\t\tvar currentEntityInstance;\n\t\t\t\t\tvar prefix = 'entity.';\n\t\t\t\t\tangular.forEach(propertyIdentifierArray,function(propertyIdentifierItem,key){\n\t\t\t\t\t\t//pass over the initial item\n\t\t\t\t\t\tif(key !== 0 ){\n\t\t\t\t\t\t\tif(key === 1){\n\t\t\t\t\t\t\t\tcurrentEntityInstance = $slatwall['new'+$scope.baseEntityName.replace('Slatwall','')]();\n\t\t\t\t\t\t\t\tcurrentEntity = currentEntityInstance.metaData[propertyIdentifierArray[key]];\n\t\t\t\t\t\t\t\ttitle += $slatwall.getRBKey(prefix+baseEntityCfcName+'.'+propertyIdentifierItem);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tvar currentEntityInstance = $slatwall['new'+currentEntity.cfc.charAt(0).toUpperCase()+currentEntity.cfc.slice(1)]();\n\t\t\t\t\t\t\t\tcurrentEntity = currentEntityInstance.metaData[propertyIdentifierArray[key]];\n\t\t\t\t\t\t\t\ttitle += $slatwall.getRBKey(prefix+currentEntityInstance.metaData.className+'.'+currentEntity.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(key < propertyIdentifierArray.length-1){\n\t\t\t\t\t\t\t\ttitle += ' | ';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\treturn title;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$scope.addColumn = function(selectedProperty, closeDialog){\n\t\t\t\t\t$log.debug('add Column');\n\t\t\t\t\t$log.debug(selectedProperty);\n\t\t\t\t\tif(selectedProperty.$$group === 'simple' || 'attribute'){\n\t\t\t\t\t\t$log.debug($scope.columns);\n\t\t\t\t\t\tif(angular.isDefined(selectedProperty)){\n\t\t\t\t\t\t\tvar column = {};\n\t\t\t\t\t\t\tcolumn.title = getTitleFromPropertyIdentifier(selectedProperty.propertyIdentifier);\n\t\t\t\t\t\t\tcolumn.propertyIdentifier = selectedProperty.propertyIdentifier;\n\t\t\t\t\t\t\tcolumn.isVisible = true;\n\t\t\t\t\t\t\tcolumn.isDeletable = true;\n\t\t\t\t\t\t\t//only add attributeid if the selectedProperty is attributeid\n\t\t\t\t\t\t\tif(angular.isDefined(selectedProperty.attributeID)){\n\t\t\t\t\t\t\t\tcolumn.attributeID = selectedProperty.attributeID;\n\t\t\t\t\t\t\t\tcolumn.attributeSetObject = selectedProperty.attributeSetObject;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$scope.columns.push(column);\n\t\t\t\t\t\t\t$scope.saveCollection();\n\t\t\t\t\t\t\tif(angular.isDefined(closeDialog) && closeDialog === true){\n\t\t\t\t\t\t\t\t$scope.addDisplayDialog.toggleDisplayDialog();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t$scope.selectBreadCrumb = function(breadCrumbIndex){\n\t\t\t\t\t//splice out array items above index\n\t\t\t\t\tvar removeCount = $scope.breadCrumbs.length - 1 - breadCrumbIndex;\n\t\t\t\t\t$scope.breadCrumbs.splice(breadCrumbIndex + 1,removeCount);\n\t\t\t\t\t$scope.selectedPropertyChanged(null);\n\t\t\t\t\t\n\t\t\t\t};\n\t\n\t\t\t\tvar unbindBaseEntityAlias = $scope.$watch('baseEntityAlias',function(newValue,oldValue){\n\t\t\t\t\tif(newValue !== oldValue){\n\t\t\t\t\t\t$scope.breadCrumbs = [ {\n\t\t\t\t\t\t\tentityAlias : $scope.baseEntityAlias,\n\t\t\t\t\t\t\tcfc : $scope.baseEntityAlias,\n\t\t\t\t\t\t\tpropertyIdentifier : $scope.baseEntityAlias\n\t\t\t\t\t\t} ];\n\t\t\t\t\t\tunbindBaseEntityAlias();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t$scope.selectedPropertyChanged = function(selectedProperty){\n\t\t\t\t\t// drill down or select field?\n\t\t\t\t\t$log.debug('selectedPropertyChanged');\n\t\t\t\t\t$log.debug(selectedProperty);\n\t\t\t\t\t$scope.selectedProperty = selectedProperty;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tjQuery(function($) {\n\t\t\t\t\t\n\t\t\t\t      var panelList = angular.element($element).children('ul');\n\t\t\t\t      panelList.sortable({\n\t\t\t\t          // Only make the .panel-heading child elements support dragging.\n\t\t\t\t          // Omit this to make then entire <li>...</li> draggable.\n\t\t\t\t          handle: '.s-pannel-name',\n\t\t\t\t          update: function(event,ui) {\n\t\t\t\t        \t  var tempColumnsArray = [];\n\t\t\t\t              $('.s-pannel-name', panelList).each(function(index, elem) {\n\t\t\t\t            \t  var newIndex = $(elem).attr('j-column-index');\n\t\t\t\t            \t  var columnItem = $scope.columns[newIndex];\n\t\t\t\t            \t  tempColumnsArray.push(columnItem);\n\t\t\t\t              });\n\t\t\t\t              $scope.$apply(function () {\n\t\t\t\t            \t  $scope.columns = tempColumnsArray;\n\t\t\t\t              });\n\t\t\t\t              $scope.saveCollection();\n\t\t\t\t          }\n\t\t\t\t      });\n\t\t\t\t  });\n\t\t\t\t\n\t\t\t\t/*var unbindBaseEntityAlaisWatchListener = scope.$watch('baseEntityAlias',function(){\n\t\t       \t\t $(\"select\").selectBoxIt();\n\t\t       \t\t unbindBaseEntityAlaisWatchListener();\n\t\t       \t});*/\n\t\t\t}]\n\t\t};\n\t}\n]);\n\n\n\t\n\t\n"],"sourceRoot":"/source/"}