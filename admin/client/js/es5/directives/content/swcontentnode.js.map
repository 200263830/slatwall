{"version":3,"names":[],"mappings":"","sources":["directives/content/swcontentnode.js"],"sourcesContent":["'use strict';\nangular.module('slatwalladmin').directive('swContentNode', [\n    '$log',\n    '$compile',\n    '$slatwall',\n    'partialsPath',\n    function ($log, $compile, $slatwall, partialsPath) {\n        return {\n            restrict: 'A',\n            scope: {\n                contentData: '='\n            },\n            templateUrl: partialsPath + 'content/contentnode.html',\n            link: function (scope, element, attr) {\n                if (angular.isDefined(scope.$parent)) {\n                    if (angular.isDefined(scope.$parent.child)) {\n                        scope.contentData = scope.$parent.child;\n                        if (angular.isUndefined(scope.depth) && angular.isUndefined(scope.$parent.depth)) {\n                            scope.depth = 1;\n                        }\n                        else {\n                            scope.depth = scope.$parent.depth + 1;\n                        }\n                    }\n                }\n                var childContentColumnsConfig = [{\n                    propertyIdentifier: '_content.contentID',\n                    isVisible: false,\n                    isSearchable: false\n                }, {\n                    propertyIdentifier: '_content.title',\n                    isVisible: true,\n                    isSearchable: true\n                }, {\n                    propertyIdentifier: '_content.site.siteName',\n                    isVisible: true,\n                    isSearchable: true\n                }, {\n                    propertyIdentifier: '_content.contentTemplateFile',\n                    persistent: false,\n                    setting: true,\n                    isVisible: true\n                }, {\n                    propertyIdentifier: '_content.allowPurchaseFlag',\n                    isVisible: true,\n                    isSearchable: true\n                }, {\n                    propertyIdentifier: '_content.productListingPageFlag',\n                    isVisible: true,\n                    isSearchable: true\n                }, {\n                    propertyIdentifier: '_content.activeFlag',\n                    isVisible: true,\n                    isSearchable: true\n                }];\n                scope.getChildContent = function (parentContentRecord) {\n                    var childContentfilterGroupsConfig = [{\n                        \"filterGroup\": [{\n                            \"propertyIdentifier\": \"_content.parentContent.contentID\",\n                            \"comparisonOperator\": \"=\",\n                            \"value\": parentContentRecord.contentID\n                        }]\n                    }];\n                    var collectionListingPromise = $slatwall.getEntity('Content', {\n                        columnsConfig: angular.toJson(childContentColumnsConfig),\n                        filterGroupsConfig: angular.toJson(childContentfilterGroupsConfig),\n                        allRecords: true\n                    });\n                    collectionListingPromise.then(function (value) {\n                        parentContentRecord.children = value.records;\n                        var table = document.getElementById(\"contentTable\");\n                        angular.forEach(parentContentRecord.children, function (child) {\n                            scope.child = child;\n                            element.after($compile('<tr class=\"childNode\" style=\"margin-left:15px\" sw-content-node data-content-data=\"child\"></tr>')(scope));\n                            //element.parent().children().splice(element.index,0,)(scope));\n                            //element.parent().append($compile('<tr class=\"childNode\" style=\"margin-left:15px\" sw-content-node data-content-data=\"child\"></tr>')(scope));\n                        });\n                    });\n                };\n            }\n        };\n    }\n]);\n\n//# sourceMappingURL=../../directives/content/swcontentnode.js.map"],"file":"directives/content/swcontentnode.js","sourceRoot":"/source/"}