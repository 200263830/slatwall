{"version":3,"sources":["modules/slatwalladmin.ts"],"names":["slatwallAdmin"],"mappings":"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","file":"modules/slatwalladmin.js","sourcesContent":["/// <reference path=\"../../../../client/typings/tsd.d.ts\" />\n/// <reference path=\"../../../../client/typings/slatwallTypeScript.d.ts\" />\n\nmodule slatwallAdmin{\n    angular.module('slatwalladmin', ['ngSlatwall','ui.bootstrap','ngAnimate','ngRoute','ngCkeditor']).\n    config(\n    \t[\"$provide\",'$logProvider','$filterProvider','$httpProvider','$routeProvider','$injector','$locationProvider','datepickerConfig', 'datepickerPopupConfig',\n    \tfunction ($provide, $logProvider,$filterProvider,$httpProvider,$routeProvider,$injector,$locationProvider,datepickerConfig, datepickerPopupConfig\n    ) {\n    \tdatepickerConfig.showWeeks = false;\n    \tdatepickerConfig.format = 'MMM dd, yyyy hh:mm a';\n    \t\tdatepickerPopupConfig.toggleWeeksText = null;\n    \tif(slatwallAngular.hashbang){\n    \t\t$locationProvider.html5Mode( false ).hashPrefix('!');\n    \t}\n    \t//\n    \t$provide.constant(\"baseURL\", $.slatwall.getConfig().baseURL);\n    \t\n    \tvar _partialsPath = $.slatwall.getConfig().baseURL + '/admin/client/partials/';\n    \t\n    \t$provide.constant(\"partialsPath\", _partialsPath);\n    \t$provide.constant(\"productBundlePartialsPath\", _partialsPath+'productbundle/');\n    \t\n    \n    \tangular.forEach(slatwallAngular.constantPaths, function(constantPath,key){\n    \t\tvar constantKey = constantPath.charAt(0).toLowerCase()+constantPath.slice(1)+'PartialsPath';\n    \t\tvar constantPartialsPath = _partialsPath+constantPath.toLowerCase()+'/';\n    \t\t$provide.constant(constantKey, constantPartialsPath);\n    \t});\n    \t\n    \t$logProvider.debugEnabled( $.slatwall.getConfig().debugFlag );\n    \t$filterProvider.register('likeFilter',function(){\n    \t\treturn function(text){\n    \t\t\tif(angular.isDefined(text) && angular.isString(text)){\n    \t\t\t\treturn text.replace(new RegExp('%', 'g'), '');\n    \t\t\t\t\n    \t\t\t}\n    \t\t};\n    \t});\n    \t\n    \t$filterProvider.register('truncate',function(){\n    \t\treturn function (input, chars, breakOnWord) {\n                if (isNaN(chars)) return input;\n                if (chars <= 0) return '';\n                if (input && input.length > chars) {\n                    input = input.substring(0, chars);\n                    if (!breakOnWord) {\n                        var lastspace = input.lastIndexOf(' ');\n                        //get last space\n                        if (lastspace !== -1) {\n                            input = input.substr(0, lastspace);\n                        }\n                    }else{\n                        while(input.charAt(input.length-1) === ' '){\n                            input = input.substr(0, input.length -1);\n                        }\n                    }\n                    return input + '...';\n                }\n                return input;\n            };\n    \t});\n    \t\n    \t$httpProvider.interceptors.push('slatwallInterceptor');\n    \n    \t// route provider configuration\n    \t$routeProvider.when('/entity/:entityName/', {\n    \t\ttemplate: function(params){\n    \t\t\tvar entityDirectiveExists = $injector.has('sw'+params.entityName+'ListDirective');\n    \t\t\tif(entityDirectiveExists){\n    \t\t\t\treturn '<sw-'+params.entityName.toLowerCase()+'-list>';\n    \t\t\t}else{\n    \t\t\t\treturn '<sw-list></sw-list>';\n    \t\t\t}\n    \t\t},\n    \t\tcontroller: 'routerController'\n    \t}).when('/entity/:entityName/:entityID', {\n    \t\ttemplate: function(params){\n    \t\t\tvar entityDirectiveExists = $injector.has('sw'+params.entityName+'DetailDirective');\n    \t\t\tif(entityDirectiveExists){\n    \t\t\t\treturn '<sw-'+params.entityName.toLowerCase()+'-detail>';\n    \t\t\t}else{\n    \t\t\t\treturn '<sw-detail></sw-detail>';\n    \t\t\t}\n    \t\t},\n    \t\tcontroller: 'routerController',\n    \t}).otherwise({\n            //controller:'otherwiseController'        \n    \t\ttemplateUrl: $.slatwall.getConfig().baseURL + '/admin/client/js/partials/otherwise.html',\n    \t});  \n    \n    }]).run(['$rootScope','$filter','$anchorScroll','$slatwall','dialogService', function($rootScope,$filter,$anchorScroll, $slatwall ,dialogService) {\n        $anchorScroll.yOffset = 100;\n    \n        $rootScope.openPageDialog = function( partial ) {\n        \tdialogService.addPageDialog( partial );\n        };\n        \n        $rootScope.closePageDialog = function( index ) {\n    \t\tdialogService.removePageDialog( index );\n        };\n        \n        $rootScope.loadedResourceBundle = false;\n        $rootScope.loadedResourceBundle = $slatwall.hasResourceBundle();\n        \n        var rbListener = $rootScope.$watch('loadedResourceBundle',function(newValue,oldValue){\n       \t\tif(newValue !== oldValue){\n        \t\t$rootScope.$broadcast('hasResourceBundle');\n        \t\trbListener();\n        \t}\n        });\n    \n    }]).filter('entityRBKey',['$slatwall', function($slatwall) {\n    \t\n      \treturn function(text){\n    \t\tif(angular.isDefined(text) && angular.isString(text)){\n    \t\t\ttext = text.replace('_', '').toLowerCase();\n    \t\t\ttext = $slatwall.getRBKey('entity.'+text);\n    \t\t\treturn text;\n    \t\t}\n    \t\t\n    \t};\n    }]);\n}"],"sourceRoot":"/source/"}