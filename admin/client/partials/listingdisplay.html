<div class="s-table-header-nav s-listing-head-margin">
	
	<div class="col-xs-6 s-no-padding-left" ng-if="swListingDisplay.title">
		<ul class="list-inline list-unstyled">
			<li>
				<h4 class="s-table-title" ng-bind="swListingDisplay.title"></h4>
			</li>
		</ul>
	</div>

	<!--<div class="col-xs-6 s-table-view-options s-no-padding-right pull-right">
		<ul class="list-inline list-unstyled">
			<li class="s-table-header-search">
				<cfif not thistag.expandable>
					<input type="text" name="search" class="form-control input-sm general-listing-search" placeholder="#attributes.hibachiScope.rbKey('define.search')#" value="" tableid="LD#replace(attributes.smartList.getSavedStateID(),'-','','all')#" >
				</cfif>
			</li>
			<li>
				<div class="btn-group navbar-left dropdown">

					<button type="button" class="btn btn-sm s-btn-dgrey dropdown-toggle"><i class="fa fa-cog"></i></button>

						<ul class="dropdown-menu pull-right" role="menu">
							<hb:HibachiActionCaller action="#attributes.exportAction#" text="#attributes.hibachiScope.rbKey('define.exportlist')#" type="list">
						</ul>
						<!--- Listing: Button Groups 
						<cfif structKeyExists(thistag, "buttonGroup") && arrayLen(thistag.buttonGroup)>
							<cfloop array="#thisTag.buttonGroup#" index="buttonGroup">
								<cfif structKeyExists(buttonGroup, "generatedContent") && len(buttonGroup.generatedContent)>
									<cfif findNoCase('dropdown', #buttonGroup.generatedContent#)>
											#buttonGroup.generatedContent#
									<cfelse>
										<div class="btn-group">
											#buttonGroup.generatedContent#
										</div>
									</cfif>
								</cfif>
							</cfloop>
						</cfif>

						<!--- Listing: Create 
						<cfif len(attributes.createAction)>
							<div class="btn-group">
								<cfif attributes.createModal>
									<hb:HibachiActionCaller action="#attributes.createAction#" queryString="#attributes.createQueryString#" class="btn btn-primary" icon="plus icon-white" modal="true">
								<cfelse>
									<hb:HibachiActionCaller action="#attributes.createAction#" queryString="#attributes.createQueryString#" class="btn btn-primary" icon="plus icon-white">
								</cfif>
							</div>
						</cfif>

				</div>
			</li>
		</ul>

	</div>-->
</div><!--- reyjay's class --->



<div class="table-responsive s-listing-display-table-wrapper" >
	<!--<table 
	id="LD#replace(attributes.smartList.getSavedStateID(),'-','','all')#" ng-class="swListingDisplay.tableclass" data-norecordstext="#attributes.hibachiScope.rbKey("entity.#thistag.exampleEntity.getClassName()#.norecords", {entityNamePlural=attributes.hibachiScope.rbKey('entity.#thistag.exampleEntity.getClassName()#_plural')})#" data-savedstateid="#attributes.smartList.getSavedStateID()#" data-entityname="swListingDisplay.collection.data.collectionObject#" data-idproperty="#thistag.exampleEntity.getPrimaryIDPropertyName()#" data-processobjectproperties="{{swListingDisplay.allprocessobjectproperties}}" data-propertyidentifiers="#thistag.exampleEntity.getPrimaryIDPropertyName()#,#thistag.allpropertyidentifiers#" {{this.tableattributes}}>
-->
	<table  ng-class="swListingDisplay.tableclass" 
			data-norecordstext="{{swListingDisplay.norecordstext}}" 
			data-processobjectproperties="{{swListingDisplay.allprocessobjectproperties}}" 
			data-entityname="{{swListingDisplay.collectionObject}}" 
			data-idproperty="{{swListingDisplay.exampleEntity.$$getIDName()}}" 
			data-processobjectproperties="{{swListingDisplay.allprocessobjectproperties}}" 
			data-propertyidentifiers="{{swListingDisplay.exampleEntity.$$getIDName()}},{{swListingDisplay.allpropertyidentifiers}}"
			{{swListingDisplay.tableattributes}}>
		<thead>
			<tr>
				<!--- Selectable --->
				<input ng-if-start="swListingDisplay.selectable" type="hidden" ng-name="swListingDisplay.selectFieldName" ng-value="swListingDisplay.selectValue" />
				<th ng-if-end ng-class="{'disabled':!swListingDisplay.edit,'select':1===1}" ng-bind="swListingDisplay.selectTitle"></th>
				<!--- Multiselectable --->
				<input ng-if-start="swListingDisplay.multiselectable" type="hidden" ng-name="swListingDisplay.multiselectFieldName" ng-value="swListingDisplay.multiselectValues" />
				<th ng-if-end ng-class="{'multiselect':1===1,'disabled':!swListingDisplay.edit}">
					<div ="!swListingDisplay.expandable && swListinDisplay.multiselectPropertyIdentifier && swListinDisplay.multiselectPropertyIdentifier.length" class="dropdown">
						<a href="##" class="dropdown-toggle" data-toggle="dropdown">&nbsp;<i class="glyphicon glyphicon-check"></i> </a>
						<ul class="dropdown-menu nav">
							<li>
								<a href="##" class="multiselect-checked-filter">
									<i class="hibachi-ui-checkbox{{!swListingDisplay.edit ? '-checked':''}}"></i> Show Selected
								</a>
							</li>
						</ul>
					</div>
					<span ng-if="!(!swListingDisplay.expandable && swListinDisplay.multiselectPropertyIdentifier && swListinDisplay.multiselectPropertyIdentifier.length)">&nbsp;</span>
				</th>
				<!--- Sortable -->
				<th class="sort" ng-if="swListingDisplay.sortable">&nbsp;</th>
				<!-- Columns -->
				<th ng-repeat="column in swListingDisplay.collectionConfig.columns" 
					class="data {{column.tdClass}}" 
					ng-cloak
				>
					{{column.title}}
				</th>
				<!--
				<!--- Columns 
				<cfloop array="#thistag.columns#" index="column">
					<cfsilent>
						<cfif not len(column.title) and len(column.propertyIdentifier)>
							<cfset column.title = thistag.exampleEntity.getTitleByPropertyIdentifier(column.propertyIdentifier) />
						</cfif>
					</cfsilent>
					<th class="data #column.tdClass#" <cfif len(column.propertyIdentifier)>data-propertyIdentifier="#column.propertyIdentifier#"<cfelseif len(column.processObjectProperty)>data-processobjectproperty="#column.processObjectProperty#"<cfif structKeyExists(column, "fieldClass")> data-fieldclass="#column.fieldClass#"</cfif></cfif>>
						<cfif (not column.sort or thistag.expandable) and (not column.search or thistag.expandable) and (not column.filter or thistag.expandable) and (not column.range or thistag.expandable)>
							#column.title#
						<cfelse>
							<div class="dropdown">
								<a href="##" class="dropdown-toggle">#column.title# <i class="fa fa-sort"></i></a>
								<ul class="dropdown-menu nav scrollable">
									<hb:HibachiDividerHider>
										<cfif column.sort and not thistag.expandable>
											<li class="dropdown-header">#attributes.hibachiScope.rbKey('define.sort')#</li>
											<li><a href="##" class="listing-sort" data-sortdirection="ASC"><i class="icon-arrow-down"></i> Sort Ascending</a></li>
											<li><a href="##" class="listing-sort" data-sortdirection="DESC"><i class="icon-arrow-up"></i> Sort Descending</a></li>
											<li class="divider"></li>
										</cfif>
										<cfif column.search and not thistag.expandable>
											<li class="dropdown-header">#attributes.hibachiScope.rbKey('define.search')#</li>
											<li class="search-filter"><input type="text" class="listing-search form-control" name="FK:#column.propertyIdentifier#" value="" /> <i class="icon-search"></i></li>
											<li class="divider"></li>
										</cfif>
										<cfif column.range and not thistag.expandable>
											<cfsilent>
												<cfset local.rangeClass = "text" />
												<cfset local.fieldType = thistag.exampleEntity.getFieldTypeByPropertyIdentifier(column.propertyIdentifier) />
												<cfif local.fieldType eq "dateTime">
													<cfset local.rangeClass = "datetimepicker" />
												</cfif>
											</cfsilent>
											<li class="dropdown-header">#attributes.hibachiScope.rbKey('define.range')#</li>
											<li class="range-filter"><label for="From Date" class="col-md-12 s-zero-left">From</label><input type="text" class="#local.rangeClass# form-control range-filter-lower col-md-12" name="R:#column.propertyIdentifier#" value="" /></li>
											<li class="range-filter"><label for="To Date" class="col-md-12 s-zero-left">To</label><input type="text" class="#local.rangeClass# form-control range-filter-upper col-md-12" name="R:#column.propertyIdentifier#" value="" /></li>
											<li class="divider"></li>
										</cfif>
										<cfif column.filter and not thistag.expandable>
											<li class="dropdown-header">#attributes.hibachiScope.rbKey('define.filter')#</li>
											<cfset filterOptions = attributes.smartList.getFilterOptions(valuePropertyIdentifier=column.propertyIdentifier, namePropertyIdentifier=column.propertyIdentifier) />
											<input type="hidden" name="F:#column.propertyIdentifier#" value="#attributes.smartList.getFilters(column.propertyIdentifier)#" />
											<cfloop array="#filterOptions#" index="filter">
												<li><a href="##" class="listing-filter" data-filtervalue="#filter['value']#"><i class="hibachi-ui-checkbox"></i> #filter['name']#</a></li>
											</cfloop>
										</cfif>
									</hb:HibachiDividerHider>
								</ul>
							</div>
						</cfif>
					</th>
				</cfloop>-->
				<!--- Admin -->
				<th ng-if="swListingDisplay.administrativeCount" class="admin admin{{swListingDisplay.administativeCount}}" {{swListingDisplay.adminattributes}}>&nbsp;</th>
			</tr>
		</thead>
		<tbody ng-class="{'sortable':swListingDisplay.sortable}">
			<tr ng-repeat="pageRecord in swListingDisplay.collectionData.pageRecords" >
				<!--Selectable-->
				<td ng-if="swListingDisplay.selectable" class="s-table-select">
					<a href="##" class="table-action-select{{swListingDisplay.edit ? '' : 'disabled'}}">
						<i class="hibachi-ui-radio"></i>
					</a>
				</td>
				<!--- Multiselectable 
				<cfif thistag.multiselectable>
					<td class="s-table-checkbox"><a href="##" class="table-action-multiselect#IIF(attributes.edit, DE(""), DE(" disabled"))#" data-idvalue="#record.getPrimaryIDValue()#"><i class="hibachi-ui-checkbox"></i></a></td>
				</cfif>
				<!--- Sortable 
				<cfif thistag.sortable>
					<td class="s-table-sort"><a href="##" class="table-action-sort" data-idvalue="#record.getPrimaryIDValue()#" data-sortPropertyValue="#record.getValueByPropertyIdentifier( attributes.sortProperty )#"><i class="fa fa-arrows"></i></a></td>
				</cfif>-->
				
				<!--Expandable Check-->
				<td 
					ng-repeat="(key,column) in swListingDisplay.collectionConfig.columns" 
					class="column.tdclass"
					ng-cloak
				>
					<a ng-if="column.tdclass === 'primary' && swListingDisplay.expandable" href="##" class="table-action-expand depth0" data-depth="0"><i class="glyphicon glyphicon-plus"></i></a> {{pageRecord[swListingDisplay.replaceAll(column.propertyIdentifier.substring(column.propertyIdentifier.indexOf('.')+1,column.propertyIdentifier.length),'.','_')]}}
				</td>
				<!--<cfloop array="#thistag.columns#" index="column">
						<!--- Expandable Check 
						<cfif column.tdclass eq "primary" and thistag.expandable>
							<td class="#column.tdclass#"><a href="##" class="table-action-expand depth0" data-depth="0"><i class="glyphicon glyphicon-plus"></i></a> #record.getValueByPropertyIdentifier( propertyIdentifier=column.propertyIdentifier, formatValue=true )#</td>
						<cfelse>
							<td class="#column.tdclass#">
								<cfif len(column.propertyIdentifier)>
									#record.getValueByPropertyIdentifier( propertyIdentifier=column.propertyIdentifier, formatValue=true )#
								<cfelseif len(column.processObjectProperty)>
									<cfset attData = duplicate(column) />
									<cfset attData.object = thisRecordProcessObject />
									<cfset attData.property = column.processObjectProperty />
									<cfset attData.edit = attributes.edit />
									<cfset attData.displayType = "plain" />
									<cfif structKeyExists(attData, "recordFieldNamePrefix") and len(attData.recordFieldNamePrefix)>
										<cfset attData.fieldName = "#attData.recordFieldNamePrefix#[#thistag.loopIndex#].#attData.fieldName#" />
									</cfif>
									<hb:HibachiPropertyDisplay attributeCollection="#attData#" />
								</cfif>
							</td>
						</cfif>
					</cfloop>-->
			</tr>
			<tr ng-if="swListingDisplay.collectionData.pageRecords && !swListingDisplay.collectionData.pageRecords.length">
				<td colspan="#thistag.columnCount#" style="text-align:center;">
					no records
				</td>
			</tr>
			
			<!--<cfset thistag.loopIndex = 0 />
			<cfif not attributes.edit and thistag.multiselectable and not len(attributes.parentPropertyName) and len(attributes.multiselectPropertyIdentifier)>
				<cfif len(attributes.multiselectValues)>
					<cfset attributes.smartList.addInFilter(attributes.multiselectPropertyIdentifier, attributes.multiselectValues) />
				<cfelse>
					<cfset attributes.smartList.addInFilter(attributes.multiselectPropertyIdentifier, '_') />
				</cfif>
			</cfif>
			<cfloop array="#attributes.smartList.getPageRecords()#" index="record">
				<cfset thistag.loopIndex++ />
				<!--- If there is a recordProcessEntity then find the processObject and inject the necessary values 
				<cfif isObject(attributes.recordProcessEntity)>
					<cfset injectValues = structNew() />
					<cfset injectValues[ "#record.getClassName()#" ] = record />
					<cfset injectValues[ "#record.getPrimaryIDPropertyName()#" ] = record.getPrimaryIDValue() />
					<cfset attributes.recordProcessEntity.clearProcessObject( attributes.recordProcessContext ) />
					<cfset thisRecordProcessObject = attributes.recordProcessEntity.getProcessObject( attributes.recordProcessContext, injectValues ) />
				</cfif>
				<tr id="#record.getPrimaryIDValue()#" <cfif thistag.expandable>idPath="#record.getValueByPropertyIdentifier( propertyIdentifier="#thistag.exampleEntity.getPrimaryIDPropertyName()#Path" )#"</cfif>>
					<!--- Selectable
					<cfif thistag.selectable>
						<td class="s-table-select"><a href="##" class="table-action-select#IIF(attributes.edit, DE(""), DE(" disabled"))#" data-idvalue="#record.getPrimaryIDValue()#"><i class="hibachi-ui-radio"></i></a></td>
					</cfif>
					<!--- Multiselectable 
					<cfif thistag.multiselectable>
						<td class="s-table-checkbox"><a href="##" class="table-action-multiselect#IIF(attributes.edit, DE(""), DE(" disabled"))#" data-idvalue="#record.getPrimaryIDValue()#"><i class="hibachi-ui-checkbox"></i></a></td>
					</cfif>
					<!--- Sortable 
					<cfif thistag.sortable>
						<td class="s-table-sort"><a href="##" class="table-action-sort" data-idvalue="#record.getPrimaryIDValue()#" data-sortPropertyValue="#record.getValueByPropertyIdentifier( attributes.sortProperty )#"><i class="fa fa-arrows"></i></a></td>
					</cfif>
					<cfloop array="#thistag.columns#" index="column">
						<!--- Expandable Check 
						<cfif column.tdclass eq "primary" and thistag.expandable>
							<td class="#column.tdclass#"><a href="##" class="table-action-expand depth0" data-depth="0"><i class="glyphicon glyphicon-plus"></i></a> #record.getValueByPropertyIdentifier( propertyIdentifier=column.propertyIdentifier, formatValue=true )#</td>
						<cfelse>
							<td class="#column.tdclass#">
								<cfif len(column.propertyIdentifier)>
									#record.getValueByPropertyIdentifier( propertyIdentifier=column.propertyIdentifier, formatValue=true )#
								<cfelseif len(column.processObjectProperty)>
									<cfset attData = duplicate(column) />
									<cfset attData.object = thisRecordProcessObject />
									<cfset attData.property = column.processObjectProperty />
									<cfset attData.edit = attributes.edit />
									<cfset attData.displayType = "plain" />
									<cfif structKeyExists(attData, "recordFieldNamePrefix") and len(attData.recordFieldNamePrefix)>
										<cfset attData.fieldName = "#attData.recordFieldNamePrefix#[#thistag.loopIndex#].#attData.fieldName#" />
									</cfif>
									<hb:HibachiPropertyDisplay attributeCollection="#attData#" />
								</cfif>
							</td>
						</cfif>
					</cfloop>
					<cfif attributes.administativeCount>
						<td class="admin admin#attributes.administativeCount#">
							<!--- Detail 
							<cfif len(attributes.recordDetailAction)>
								<cfif len(attributes.recordDetailActionProperty)>
									<cfset detailActionProperty=listlast(attributes.recordDetailActionProperty,'.')>
									<cfset detailActionPropertyValue=record.getValueByPropertyIdentifier( propertyIdentifier=attributes.recordDetailActionProperty)>
								<cfelse>
									<cfset detailActionProperty=record.getPrimaryIDPropertyName()>
									<cfset detailActionPropertyValue=record.getPrimaryIDValue()>
								</cfif>

								<cfset thisID = "#replace(replace(lcase(attributes.recordDetailAction), ':', ''), '.', '')#_#record.getPrimaryIDValue()#" />
								<hb:HibachiActionCaller action="#attributes.recordDetailAction#" queryString="#listPrepend(attributes.recordDetailQueryString, '#detailActionProperty#=#detailActionPropertyValue#', '&')#" class="btn btn-default btn-xs" icon="eye-open" iconOnly="true" modal="#attributes.recordDetailModal#" id="#thisID#" />
							</cfif>

							<!--- Edit 
							<cfif len(attributes.recordEditAction)>
								<cfif len(attributes.recordEditActionProperty)>
									<cfset editActionProperty=listlast(attributes.recordEditActionProperty,'.')>
									<cfset editActionPropertyValue=record.getValueByPropertyIdentifier( propertyIdentifier=attributes.recordEditActionProperty)>
								<cfelse>
									<cfset editActionProperty=record.getPrimaryIDPropertyName()>
									<cfset editActionPropertyValue=record.getPrimaryIDValue()>
								</cfif>
								<cfset thisID = "#replace(replace(lcase(attributes.recordEditAction), ':', ''), '.', '')#_#record.getPrimaryIDValue()#" />
								<cfset local.editErrors = attributes.hibachiScope.getService("hibachiValidationService").validate(object=record, context="edit", setErrors=false) />
								<cfset local.disabled = local.editErrors.hasErrors() />
								<cfset local.disabledText = local.editErrors.getAllErrorsHTML() />
								<hb:HibachiActionCaller action="#attributes.recordEditAction#" queryString="#listPrepend(attributes.recordEditQueryString, '#editActionProperty#=#editActionPropertyValue#', '&')#" class="btn btn-default btn-xs" icon="pencil" iconOnly="true" disabled="#local.disabled#" disabledText="#local.disabledText#" modal="#attributes.recordEditModal#" id="#thisID#" />
							</cfif>

							<!--- Delete 
							<cfif len(attributes.recordDeleteAction)>
								<cfif len(attributes.recordDeleteActionProperty)>
									<cfset deleteActionProperty=listlast(attributes.recordDeleteActionProperty,'.')>
									<cfset deleteActionPropertyValue=record.getValueByPropertyIdentifier( propertyIdentifier=attributes.recordDeleteActionProperty)>
								<cfelse>
									<cfset deleteActionProperty=record.getPrimaryIDPropertyName()>
									<cfset deleteActionPropertyValue=record.getPrimaryIDValue()>
								</cfif>
								<cfset thisID = "#replace(replace(lcase(attributes.recordDeleteAction), ':', ''), '.', '')#" />
								<cfset local.deleteErrors = attributes.hibachiScope.getService("hibachiValidationService").validate(object=record, context="delete", setErrors=false) />
								<cfset local.disabled = local.deleteErrors.hasErrors() />
								<cfset local.disabledText = local.deleteErrors.getAllErrorsHTML() />
								<hb:HibachiActionCaller action="#attributes.recordDeleteAction#" queryString="#listPrepend(attributes.recordDeleteQueryString, '#deleteActionProperty#=#deleteActionPropertyValue#', '&')#" class="btn btn-default btn-xs" icon="trash" iconOnly="true" disabled="#local.disabled#" disabledText="#local.disabledText#" confirm="true" id="#thisID#" />
							</cfif>

							<!--- Process 
							<cfif len(attributes.recordProcessAction)>
								<cfif len(attributes.recordDeleteActionProperty)>
									<cfset processActionProperty=listlast(attributes.recordProcessActionProperty,'.')>
									<cfset processActionPropertyValue=record.getValueByPropertyIdentifier( propertyIdentifier=attributes.recordProcessActionProperty)>
								<cfelse>
									<cfset processActionProperty=record.getPrimaryIDPropertyName()>
									<cfset processActionPropertyValue=record.getPrimaryIDValue()>
								</cfif>
								<cfset thisID = "#replace(replace(lcase(attributes.recordProcessAction), ':', ''), '.', '')#_#record.getPrimaryIDValue()#" />
								<hb:HibachiProcessCaller action="#attributes.recordProcessAction#" entity="#attributes.recordProcessEntity#" processContext="#attributes.recordProcessContext#" queryString="#listPrepend(attributes.recordProcessQueryString, '#processActionProperty#=#processActionPropertyValue#', '&')#" class="btn btn-default hibachi-ajax-submit" id="#thisID#" />
							</cfif>
						</td>
					</cfif>
				</tr>
			</cfloop>
			<cfif !arrayLen(attributes.smartList.getPageRecords())>
				<tr><td colspan="#thistag.columnCount#" style="text-align:center;"><em>#attributes.hibachiScope.rbKey("entity.#thistag.exampleEntity.getClassName()#.norecords", {entityNamePlural=attributes.hibachiScope.rbKey('entity.#thistag.exampleEntity.getClassName()#_plural')})#</em></td></tr>
			</cfif>
			--->
		</tbody>
	</table>

	</div><!--- table-responsive --->

	<sw-pagination-bar
		ng-if="swListingDisplay.paginator"
		data-paginator="swListingDisplay.paginator"
		>
	</sw-pagination-bar>


