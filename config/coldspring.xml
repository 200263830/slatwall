<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>
	
	<bean id="accountDAO" class="slatwall.com.dao.AccountDAO" />
	<bean id="brandDAO" class="slatwall.com.dao.[integration]BrandDAO" />
	<bean id="productDAO" class="slatwall.com.dao.[integration]ProductDAO" />
	<bean id="productTypeDAO" class="slatwall.com.dao.[integration]ProductTypeDAO">
		 <constructor-arg name="productTypeTreeSorter"><ref bean="productTypeTreeSorter" /></constructor-arg>
	</bean>
	<bean id="sessionDAO" class="slatwall.com.dao.sessionDAO" />
	<bean id="settingDAO" class="slatwall.com.dao.[integration]SkuDAO" />
	<bean id="skuDAO" class="slatwall.com.dao.[integration]SkuDAO" />
    <bean id="optionDAO" class="slatwall.com.dao.[integration]OptionDAO" />
    <bean id="optionGroupDAO" class="slatwall.com.dao.[integration]OptionGroupDAO" />
	<bean id="typeDAO" class="slatwall.com.dao.TypeDAO" />
	<bean id="vendorDAO" class="slatwall.com.dao.[integration]VendorDAO" />
	<bean id="formUtilities" class="slatwall.com.utility.FormUtilities" />
	<bean id="FileService" class="slatwall.com.service.FileService" />
	<bean id="Validator" class="slatwall.com.utility.Validator" />
	<bean id="ProductTypeTreeSorter" class="slatwall.com.utility.QueryTreeSorter">
		<constructor-arg name="TitleColumn"><value>productTypeName</value></constructor-arg>
		<constructor-arg name="ItemID"><value>productTypeID</value></constructor-arg>
		<constructor-arg name="ParentID"><value>parentProductTypeID</value></constructor-arg>
		<constructor-arg name="pathColumn"><value>productTypeName</value></constructor-arg>
	</bean>
	
	<!-- transaction advice -->
    <bean id="transactionAdvice" class="slatwall.com.utility.transactionadvice" />
	
	<!-- transaction advisor -->
	<bean id="transactionAdvisor" class="coldspring.aop.support.RegexMethodPointcutAdvisor">
		<property name="advice">
			<ref bean="transactionAdvice" />
		</property>
		<property name="pattern">
			<!-- only wrap writes/deletes to db in transactional context -->
			<value>(?!prep)\b\w+</value>
		</property>
	</bean>
	
    <bean id="accountService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.accountService">
		        <constructor-arg name="entityName"><value>SlatwallAccount</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="accountDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
				<constructor-arg name="userManager"><ref bean="userManager" /></constructor-arg>
				<constructor-arg name="sessionService"><ref bean="sessionService" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>
	
    <bean id="brandService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.brandService">
		        <constructor-arg name="entityName"><value>SlatwallBrand</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="BrandDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>

    <bean id="optionService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.OptionService">
                <constructor-arg name="entityName"><value>SlatwallOption</value></constructor-arg>
                <constructor-arg name="DAO"><ref bean="OptionDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
				<constructor-arg name="fileService"><ref bean="FileService" /></constructor-arg>            
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>
	
    <bean id="productService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.productService">
		        <constructor-arg name="entityName"><value>SlatwallProduct</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="ProductDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
				<constructor-arg name="fileService"><ref bean="FileService" /></constructor-arg>  
		        <constructor-arg name="skuDAO"><ref bean="SkuDAO" /></constructor-arg>
		        <constructor-arg name="productTypeDAO"><ref bean="ProductTypeDAO" /></constructor-arg>
				<constructor-arg name="skuService"><ref bean="SkuService" /></constructor-arg>
		        <constructor-arg name="ContentManager"><ref bean="ContentManager" /></constructor-arg>
				<constructor-arg name="feedManager"><ref bean="feedManager" /></constructor-arg>
		        <constructor-arg name="SettingsManager"><ref bean="SettingsManager" /></constructor-arg>
				<constructor-arg name="FileService"><ref bean="FileService" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>

	<bean id="skuService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.skuService">
                <constructor-arg name="entityName"><value>SlatwallSku</value></constructor-arg>
                <constructor-arg name="DAO"><ref bean="SkuDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>

	<bean id="typeService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.typeService">
                <constructor-arg name="entityName"><value>SlatwallType</value></constructor-arg>
                <constructor-arg name="DAO"><ref bean="TypeDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>
	
	<bean id="sessionService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.sessionService">
		        <constructor-arg name="entityName"><value>SlatwallSession</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="SessionDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>
	
	<bean id="settingService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.settingService">
		        <constructor-arg name="entityName"><value>SlatwallSetting</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="settingDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>

    <bean id="vendorService" class="coldspring.aop.framework.ProxyFactoryBean">
        <property name="target">
            <bean class="slatwall.com.service.vendorService">
		        <constructor-arg name="entityName"><value>SlatwallVendor</value></constructor-arg>
		        <constructor-arg name="DAO"><ref bean="VendorDAO" /></constructor-arg>
				<constructor-arg name="validator"><ref bean="Validator" /></constructor-arg>
            </bean>
        </property>
        <property name="interceptorNames">
            <list>
                <value>transactionAdvisor</value>
            </list>
        </property>
    </bean>

</beans>