jQuery(function(){jQuery(".editPromotionReward").click(function(){var c=jQuery(this).attr("id").substr(4);jQuery("tr#promotionRewardEdit"+c).toggle();return false});var a=jQuery('tr[id^="PromotionCode"]').length;jQuery("#addPromotionCode").click(function(){var d=jQuery('tr[id^="PromotionCode"]').length;d++;var c=jQuery("#promotionCodeTableTemplate tbody>tr:last").clone(true);c.children("td").children("input[name=startDateTime]").datetimepicker({ampm:true,});c.children("td").children("input[name=endDateTime]").datetimepicker({ampm:true,});c.children("td").children("input").each(function(e){var f=jQuery(this);if(f.attr("type")!="radio"){f.attr("name","promotionCodes["+d+"]."+f.attr("name"))}});c.children("td").children("select").each(function(e){var f=jQuery(this);f.attr("name","promotionCodes["+d+"]."+f.attr("name"))});jQuery("#remPromotionCode").attr("style","");jQuery("#promotionCodeTable > tbody:last").append(c);c.attr("id","PromotionCode"+d);if(d%2==1){c.addClass("alt")}});jQuery("#remPromotionCode").click(function(){var c=jQuery('tr[id^="PromotionCode"]').length;jQuery("#PromotionCode"+c).remove();if(c-1==a){jQuery("#remPromotionCode").attr("style","display:none;")}});var b=jQuery(".promotionRewardForm").length;jQuery("#addPromotionReward").click(function(){var c=jQuery(".promotionRewardForm").length;c++;var d=jQuery("#promotionRewardFormTemplate").clone(true);d.children("dl").each(function(e){var f=jQuery(this);f.attr("id",f.attr("id")+c)});d.children("dl").children("dt").children("label").each(function(e){var f=jQuery(this);f.attr("for",f.attr("for")+c)});d.children("dl").children("dd").children("input").each(function(e){var f=jQuery(this);f.attr("name","promotionRewards["+c+"]."+f.attr("name"));f.attr("id",f.attr("id")+c)});d.children("dl").children("dd").children("select").each(function(e){var f=jQuery(this);f.attr("name","promotionRewards["+c+"]."+f.attr("name"));f.attr("id",f.attr("id")+c)});d.removeAttr("id");d.removeAttr("class");d.addClass("promotionRewardForm");jQuery("#rewardButtons").before(d);jQuery("#remPromotionReward").attr("style","")});jQuery("#remPromotionReward").click(function(){var c=jQuery(".promotionRewardForm").length;jQuery(".promotionRewardForm").last().remove();if(c-1==b){jQuery("#remPromotionReward").attr("style","display:none;")}});jQuery("input.rewardProduct").live("focus",function(d){var c=jQuery(this).closest("dl").find('select[id^="productTypeID"]').val();jQuery(this).autocomplete({source:"?slatAction=admin:product.searchProductsByType&productTypeID="+c,select:function(e,f){jQuery("#product"+jQuery(this).attr("id").substr(11)).val(f.item.id)}})});jQuery("input.rewardSku").live("focus",function(d){var c=jQuery(this).closest("dl").find('select[id^="productTypeID"]').val();jQuery(this).autocomplete({source:"?slatAction=admin:product.searchSkusByProductType&productTypeID="+c,select:function(e,f){jQuery("#sku"+jQuery(this).attr("id").substr(7)).val(f.item.id)}})});jQuery(".rewardTypeSelector").change(function(){var d=jQuery(this).val();var c=jQuery(this).parents("dl").attr("id").substr(12);$shippingRewardForm=jQuery("#shippingReward"+c);$productRewardForm=jQuery("#productReward"+c);$shippingRewardForm.hide();$productRewardForm.hide();if(d=="shipping"){$shippingRewardForm.show()}else{if(d=="product"){$productRewardForm.show()}}})});